!function(e,t,i,a){"use strict";function s(t,i){this.element=t,this.settings=e.extend(!0,{},l,i),this._defaults=l,this._name=n,this.init()}var o,n="ShopLocator",l={pluginStyle:"lollipop",paginationStyle:1,preloader:!1,json:null,map:{center:[52.229676,21.012229],MapType:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,mapStyle:[],draggable:!0,disableDoubleClickZoom:!1,maxZoom:"",minZoom:"",scrollwheel:!0,zoom:10,allMarkersInViewport:!0},infoBubble:{visible:!1,padding:0,borderRadius:4,borderWidth:0,borderColor:"#fff",backgroundColor:"#fff",shadowStyle:0,minHeight:null,maxHeight:100,minWidth:200,maxWidth:null,arrowStyle:0,arrowSize:10,arrowPosition:50,hideCloseButton:!1,closeSrc:"src/style/closeButton.svg",offsetTop:2,offsetRight:2,disableAutoPan:!1,getDirectionsButton:!0,getDirectionsButtonName:"Get Directions",directionsUseGeolocation:!0},markersIcon:"",marker:{latlng:[52.229676,21.012229],animation:!1,title:"CreateIT",street:"",zip:"",city:""},cluster:{enable:!1,clusterClass:"cluster",gridSize:50,maxZoom:11,style:{anchorIcon:[0,0],anchorText:[0,0],backgroundPosition:"0 0",fontFamily:"Arial,sans-serif",fontStyle:"normal",textColor:"white",fontWeight:"bold",textSize:18,heightSM:60,widthSM:54,heightMD:60,widthMD:54,heightBIG:60,widthBIG:54,iconSmall:"",iconMedium:"",iconBig:""}},sidebar:{visible:!1,units:"km",selectSection:{visible:!1,pathToJSONDirectory:"src/json/",difFiles:[["First Region","markers"],["Second Region","diffmarkers"]],fileTypes:"json"},searchBox:{visible:!1,findPlaceBy:["(regions)"],searchByCountry:[!0,"us"],search:!1,searchRadius:20},results:{visibleInFirstPage:!0,pageSize:10,currentPage:1,paginationItems:5}}};e.extend(s.prototype,{init:function(){this.loadDependences(this,this.element,this.settings),this.setUpScriptBody(this.element,this.settings),this.setUpMap(this.element,this.settings)},loadDependences:function(t,i,a){if(0===e("#markerclusterer").length){var s="src/dependences/markerclusterer.js",o=e('<script id="markerclusterer" type="text/javascript"></script>');o.attr("src",s),o.appendTo(e("head"))}if(0===e("#infobubble").length){var n="src/dependences/infobubble.js",l=e('<script id="infobubble" type="text/javascript"></script>');l.attr("src",n),l.appendTo(e("head"))}},setUpScriptBody:function(t,i){var a;e(t).addClass(i.pluginStyle),1==i.sidebar.visible?(t.innerHTML="<div class='row'><div class='ct-googleMap--SidebarCol'><div class='ct-googleMap--sidebar'></div></div><div class='ct-googleMap--MapCol'><div class='ct-googleMap ct-js-googleMap' id='map_canvas'></div></div></div>",a=e(t).find(".ct-googleMap--sidebar"),1==i.sidebar.selectSection.visible&&(a.append("<div class='ct-googleMap--selectContainer'><select class='ct-googleMap--select'></select></div>"),this.createSelectSection(t,i)),(1==i.sidebar.searchBox.visible||1==i.sidebar.searchBox.search)&&(a.append("<div class='ct-googleMap--searchContainer'><input type='text' class='ct-googleMap--search' id='searchGmaps' placeholder='Code or city'></div>"),1==i.sidebar.searchBox.search?a.append("<div class='ct-googleMap--resultsCounter'></div><div class='ct-googleMap--results'></div>"):1==i.sidebar.results.visibleInFirstPage&&a.append("<div class='ct-googleMap--results'></div>")),1==i.preloader&&e(t).append("<div class='ct-preloader'><div class='ct-preloaderCenter'><div class='ct-preloader-content'><span></span><span></span><span></span><span></span><span></span></div></div> </div>")):t.innerHTML="<div class='ct-googleMap ct-js-googleMap' id='map_canvas'></div>"},setUpMap:function(i,a){var s,o,n,l,r=e(i).find(".ct-js-googleMap");l=t.screen.width<998?!1:a.map.draggable,o=new google.maps.Map(r[0],{center:new google.maps.LatLng(a.map.center[0],a.map.center[1]),mapTypeId:a.map.MapType,styles:a.map.mapStyle,disableDefaultUI:a.map.disableDefaultUI,draggable:l,disableDoubleClickZoom:a.map.disableDoubleClickZoom,maxZoom:a.map.maxZoom,minZoom:a.map.minZoom,scrollwheel:a.map.scrollwheel,zoom:a.map.zoom}),1==a.infoBubble.visible&&(s=new google.maps.InfoWindow),n=new google.maps.LatLngBounds,this.displayMarkers(this,i,o,n,a)},JSonMainFunction:function(t,i,a,s,o,n,l,r){var c,d,g,p,h,u=[];0!==r.cluster.style.iconSmall.length&&0!==r.cluster.style.iconMedium&&0!==r.cluster.style.iconBig&&(u=[{anchorIcon:r.cluster.style.anchorIcon,anchorText:r.cluster.style.anchorText,backgroundPosition:r.cluster.style.backgroundPosition,fontFamily:r.cluster.style.fontFamily,fontStyle:r.cluster.style.fontStyle,textColor:r.cluster.style.textColor,fontWeight:r.cluster.style.fontWeight,textSize:r.cluster.style.textSize,url:r.cluster.style.iconSmall,height:r.cluster.style.heightSM,width:r.cluster.style.widthSM},{anchorIcon:r.cluster.style.anchorIcon,anchorText:r.cluster.style.anchorText,backgroundPosition:r.cluster.style.backgroundPosition,fontFamily:r.cluster.style.fontFamily,fontStyle:r.cluster.style.fontStyle,textColor:r.cluster.style.textColor,fontWeight:r.cluster.style.fontWeight,textSize:r.cluster.style.textSize,url:r.cluster.style.iconMedium,height:r.cluster.style.heightMD,width:r.cluster.style.widthMD},{anchorIcon:r.cluster.style.anchorIcon,anchorText:r.cluster.style.anchorText,backgroundPosition:r.cluster.style.backgroundPosition,fontFamily:r.cluster.style.fontFamily,fontStyle:r.cluster.style.fontStyle,textColor:r.cluster.style.textColor,fontWeight:r.cluster.style.fontWeight,textSize:r.cluster.style.textSize,url:r.cluster.style.iconBig,height:r.cluster.style.heightBIG,width:r.cluster.style.widthBIG}]),h={clusterClass:r.cluster.clusterClass,gridSize:r.cluster.gridSize,maxZoom:r.cluster.maxZoom,styles:u},e(o).find(".ct-googleMap--search").val(""),s=[],d=a,d.sort(function(e,t){var i=e.title,a=t.title;return i==a?0:i>a?1:-1}),l=new google.maps.LatLngBounds(null);for(var b=0;d.length>b;b++)g=t.createMarkers(n,i,d[b],r),l.extend(g.position),s.push(g),1==r.sidebar.visible&&1==r.sidebar.results.visibleInFirstPage&&t.createSidebarButtons(n,g,o,r);return t.resultsInPage(t,o,r),1==r.cluster.enable&&(c=!0,p=new MarkerClusterer(n,s,h)),1==r.map.allMarkersInViewport&&n.fitBounds(l),(1==r.sidebar.searchBox.visible||1==r.sidebar.searchBox.search)&&t.searchPlace(t,i,n,s,o,r),p},displayMarkers:function(t,i,a,s,o){var n,l,r,c,d,g,p,h,u=[];if(n=e(i).find(".ct-googleMap--select"),1==o.preloader)var b=e(i).find(".ct-preloader");if(1==o.sidebar.searchBox.visible||1==o.sidebar.searchBox.search){h=1==o.sidebar.searchBox.searchByCountry[0]?{types:o.sidebar.searchBox.findPlaceBy,componentRestrictions:{country:o.sidebar.searchBox.searchByCountry[1]}}:{types:o.sidebar.searchBox.findPlaceBy};var m=e(i).find(".ct-googleMap--search");p=new google.maps.places.Autocomplete(m[0],h)}if(1==o.sidebar.selectSection.visible&&1==o.sidebar.visible)e(n).change(function(){e(this).find("option:selected").each(function(){l=e(i).find(".ct-googleMap--sidebarItem"),l.remove(),r=n.val(),e(i).find(".ct-googleMap--resultsCounter").html(""),1==o.preloader&&b.removeClass("make-hidden"),e.ajax({url:o.sidebar.selectSection.pathToJSONDirectory+r+"."+o.sidebar.selectSection.fileTypes,dataType:"json",success:function(e){1==g&&(d.clearMarkers(),g=!1),d=t.JSonMainFunction(t,p,e,u,i,a,s,o),g=!0,1==o.preloader&&b.addClass("make-hidden")},error:function(e,t,i){console.log("ERROR",t,i)}})})}).trigger("change");else if(null==o.json){var f=[{lat:o.marker.latlng[0],lng:o.marker.latlng[1],title:o.marker.title,street:o.marker.street,city:o.marker.city,zip:o.marker.zip}];c=t.createMarkers(a,p,f[0],o),u.push(c),1==o.map.allMarkersInViewport&&(s.extend(c.position),a.fitBounds(s)),(1==o.sidebar.visible&&1==o.sidebar.searchBox.visible||1==o.sidebar.searchBox.search)&&t.searchPlace(t,p,a,u,i,o)}else e.ajax({url:o.json,dataType:"json",success:function(e){1==g&&(d.clearMarkers(),g=!1),d=t.JSonMainFunction(t,p,e,u,i,a,s,o),g=!0,1==o.preloader&&b.addClass("make-hidden")},error:function(e,t,i){console.log("ERROR",t,i)}})},createMarkers:function(t,i,a,s){var n="",l=new google.maps.Marker({position:new google.maps.LatLng(a.lat,a.lng),animation:s.marker.animation,map:t,title:a.title,icon:a.icon});0!=s.markersIcon.length&&l.setIcon(s.markersIcon);var r=l.getPosition();if(1==s.infoBubble.getDirectionsButton&&(n="<a class='ct-button--direction make-hidden' href='' target='_blank'>"+s.infoBubble.getDirectionsButtonName+"</a>"),1==s.infoBubble.visible){var c=new InfoBubble({visible:s.infoBubble.visible,content:"<div class = 'ct-googleMap--InfoWindowBody' style='text-align: center;'><span>"+a.title+"</span><span>"+a.street+"</span><span>"+a.zip+" - "+a.city+"</span>"+n+"</div>",backgroundClassName:"ct-googleMap--customInfoWindow",padding:s.infoBubble.padding,borderRadius:s.infoBubble.borderRadius,borderWidth:s.infoBubble.borderWidth,borderColor:s.infoBubble.borderColor,backgroundColor:s.infoBubble.backgroundColor,shadowStyle:s.infoBubble.shadowStyle,minHeight:s.infoBubble.minHeight,maxHeight:s.infoBubble.maxHeight,minWidth:s.infoBubble.minWidth,maxWidth:s.infoBubble.maxWidth,arrowStyle:s.infoBubble.arrowStyle,arrowSize:s.infoBubble.arrowSize,arrowPosition:s.infoBubble.arrowPosition,hideCloseButton:s.infoBubble.hideCloseButton,closeSrc:s.infoBubble.closeSrc,offsetTop:s.infoBubble.offsetTop,offsetRight:s.infoBubble.offsetRight,disableAutoPan:s.infoBubble.disableAutoPan});if(google.maps.event.addListener(l,"click",function(){o&&o.close(),c.open(t,l),o=c}),1==s.infoBubble.getDirectionsButton){if(0==s.infoBubble.directionsUseGeolocation&&1==s.sidebar.searchBox.visible&&1==s.sidebar.visible){var d,g,p,h=!1;google.maps.event.addListener(i,"places_changed",function(){d=i.getPlace(),g=d.geometry.location.lat(),p=d.geometry.location.lng(),h=!0})}google.maps.event.addListener(c,"domready",function(){var t=e("a.ct-button--direction");1==s.infoBubble.directionsUseGeolocation||0==s.sidebar.visible?(t.removeClass("make-hidden"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){t.each(function(){e(this).attr("href",""),e(this).attr("href","http://maps.google.com/maps?saddr="+i.coords.latitude+","+i.coords.longitude+",&daddr="+r.lat()+","+r.lng())})},function(){console.log("Error: The Geolocation service failed.")}):console.log("Error: Your browser doesn't support geolocation.")):(t.each(function(){e(this).attr("href",""),e(this).attr("href","http://maps.google.com/maps?saddr="+g+","+p+",&daddr="+r.lat()+","+r.lng())}),1==h&&t.removeClass("make-hidden"))})}}return google.maps.event.addDomListener(l,"click",function(){t.setCenter(r)}),l},createSidebarButtons:function(t,a,s,o){var n=e(s).find(".ct-googleMap--results"),l=i.createElement("div");l.className="ct-googleMap--sidebarItem",google.maps.event.clearListeners(l,"click"),l.innerHTML="<span class='ct-googleMap--sidebarItemTitle'>"+a.getTitle()+"</span>",n.append(l),google.maps.event.addDomListener(l,"click",function(){google.maps.event.trigger(a,"click"),t.setZoom(12),t.setCenter(a.getPosition())})},searchPlace:function(e,t,i,a,s,o){google.maps.event.addListener(t,"place_changed",function(){var n,l=t.getPlace();if(l.geometry)n=new google.maps.LatLng(l.geometry.location.lat(),l.geometry.location.lng()),1==o.sidebar.searchBox.search&&e.displaySearchResults(e,i,a,n,s,o),i.setCenter(l.geometry.location);else{var r=new google.maps.Geocoder,c=l.name;r.geocode({address:c+","+o.sidebar.searchBox.searchByCountry[1]},function(t,l){l===google.maps.GeocoderStatus.OK?(i.setCenter(t[0].geometry.location),n=new google.maps.LatLng(t[0].geometry.location[0],t[0].geometry.location[1]),1==o.sidebar.searchBox.search&&e.displaySearchResults(e,i,a,n,s,o)):alert("Geocode was not successful for the following reason: "+l)})}0!=l.length&&i.setZoom(11)})},displaySearchResults:function(t,i,a,s,o,n){var l,r,c,d=[],g=e(o).find(".ct-googleMap--resultsCounter");"km"==n.sidebar.units?(r=1e3,c="km"):(r=1609,c="mile"),l=e(o).find(".ct-googleMap--sidebarItem"),l.remove();for(var p=0;a.length>p;p++){var h=a[p].getPosition().lat(),u=a[p].getPosition().lng(),b=new google.maps.LatLng(h,u),m=google.maps.geometry.spherical.computeDistanceBetween(s,b)/r;m<n.sidebar.searchBox.searchRadius&&(a[p].distance=m.toFixed(2),d.push(a[p]))}d.sort(function(e,t){var i=parseFloat(e.distance,10),a=parseFloat(t.distance,10);return i-a});for(var f=0;d.length>f;f++)t.createSidebarButtons(i,d[f],o,n),e(o).find(".ct-googleMap--sidebarItem:nth-child("+(f+1)+")").append("<span class='ct-googleMap--sidebarItemDistance'>"+d[f].distance+" "+c+"</span>");g.html(""),g.append("Items<span class='ct-googleMap--itemCounter'>"+d.length+"</span>"),t.resultsInPage(t,o,n)},resultsInPage:function(t,i,a){var s=a.sidebar.results.pageSize,o=a.sidebar.results.currentPage,n=1,l=e(i).find(".ct-googleMap--results"),r="<ul class='Navigation'>",c="<li class='paginationCounter'>";if(t.sidebarClear(n,i),c+=1!=a.paginationStyle?"</li>":"<a rel='1' class='NavPage'>1</a>",l.children().each(function(t){n*s>t&&t>=(n-1)*s?e(this).addClass("page"+n):(e(this).addClass("page"+(n+1)),1==a.paginationStyle&&(c+="<a rel='"+(n+1)+"' class='NavPage'>"+(n+1)+"</a>"),n++)}),1==a.paginationStyle&&(c+="</li>"),l.children().hide(),l.children(".page"+o).show(),!(1>=n)){var d=1;r+="<li class='NavigationPrev NavigationDisable Navigation"+d+"'><a rel='"+d+"'></a></li>",r+=c,r+="<li class='NavigationNext Navigation"+(d+1)+"'><a rel='"+(d+1)+"' ></a></li>",r+="</ul>",e(i).find(".ct-googleMap--sidebar").append(r),t.pagination(t,l,n,s,o,i,a)}},pagination:function(t,i,a,s,o,n,l){var r,c=1,d=1,g=1,p=e(n).find(".paginationCounter"),h=e(n).find(".NavigationPrev"),u=e(n).find(".NavigationNext");2==l.paginationStyle&&t.counterElements(i,p,a,s,o,n),1==l.paginationStyle&&(p.children().each(function(t){t<g*l.sidebar.results.paginationItems&&t>=(g-1)*l.sidebar.results.paginationItems?e(this).addClass("paginationPage"+g):(e(this).addClass("paginationPage"+(g+1)),g+=1)}),p.children().hide(),p.children(".paginationPage"+o).show(),e(n).find(".NavPage[rel='"+o+"']").addClass("active"),e(n).find(".NavPage").on("click",function(){var t=e(this).attr("rel");e(this).addClass("active").siblings().removeClass("active"),r=!0,c>t?(c=t,h.trigger("click")):(c=t,u.trigger("click"))})),e(n).find(".NavigationPrev").on("click",function(){1==r?(i.children().hide(),i.find(".page"+c).show(),1==c&&e(this).addClass("NavigationDisable"),u.removeClass("NavigationDisable"),r=!1):(1==c?(c=1,i.children().hide(),i.find(".page"+c).show()):(2==c&&e(this).addClass("NavigationDisable"),u.removeClass("NavigationDisable"),c-=1,i.children().hide(),i.find(".page"+c).show()),1!=l.paginationStyle?(p.children().hide(),p.children(".paginationCount"+c).show()):(c<d*l.sidebar.results.paginationItems&&c==(d-1)*l.sidebar.results.paginationItems?(d-=1,p.children().hide(),p.children(".paginationPage"+d).show()):c<d*l.sidebar.results.paginationItems&&c>=(d-1)*l.sidebar.results.paginationItems?(p.children().hide(),p.children(".paginationPage"+d).show()):(d-=1,p.children().hide(),p.children(".paginationPage"+d).show()),e(n).find(".NavPage[rel='"+c+"']").addClass("active").siblings().removeClass("active")))}),e(n).find(".NavigationNext").on("click",function(){1==r?(i.children().hide(),i.find(".page"+c).show(),c==a&&e(this).addClass("NavigationDisable"),h.removeClass("NavigationDisable"),r=!1):(c==a?(c=a,i.children().hide(),i.find(".page"+c).show()):(c==a-1&&e(this).addClass("NavigationDisable"),h.removeClass("NavigationDisable"),c=parseInt(c,10)+1,i.children().hide(),i.find(".page"+c).show()),1!=l.paginationStyle?(p.children().hide(),p.children(".paginationCount"+c).show()):(c<d*l.sidebar.results.paginationItems&&c>=(d-1)*l.sidebar.results.paginationItems||c==d*l.sidebar.results.paginationItems?(p.children().hide(),p.children(".paginationPage"+d).show()):(d++,p.children().hide(),p.children(".paginationPage"+d).show()),e(n).find(".NavPage[rel='"+c+"']").addClass("active").siblings().removeClass("active")))})},counterElements:function(t,i,a,s,o,n){for(var l=[],r=0;a>r;r++)l.push(e(n).find(".page"+(1+r)).length),l[r]>1?i.append("<span class='paginationCount"+(r+1)+"'>"+(1+r*s)+" - "+(l[r]+r*s)+" of "+t.children().length+"</span>"):i.append("<span class='paginationCount"+(r+1)+"'>"+(l[r]+r*s)+" of "+t.children().length+"</span>");i.children().hide(),e(n).find(".paginationCount"+o).show()},createSelectSection:function(t,i){for(var a=i.sidebar.selectSection.difFiles,s=e(t).find(".ct-googleMap--select"),o=0;a.length>o;o++)s.append("<option value='"+a[o][1]+"'>"+a[o][0]+"</option>")},sidebarClear:function(t,i){e(i).find(".Navigation").remove(),t=1}}),e.fn[n]=function(t){return this.each(function(){e.data(this,"plugin_"+n)||e.data(this,"plugin_"+n,new s(this,t))})}}(jQuery,window,document);